<div class="meeting-list-container">
  <div class="card">
    <div class="card-header">
      <h2>Meetings</h2>
      <div class="action-buttons">
        <p-button icon="pi pi-plus" label="New Meeting" (onClick)="onCreateMeeting()" 
          styleClass="p-button-primary"></p-button>
      </div>
    </div>

    <div class="card-content">
      <div class="filters">
        <div class="filter-group">
          <p-dropdown [options]="statusOptions" [(ngModel)]="statusFilter" 
            placeholder="Filter by Status" optionLabel="status" 
            [showClear]="true" class="status-filter"></p-dropdown>
          
          <p-calendar [(ngModel)]="dateRange" selectionMode="range" 
            [showIcon]="true" placeholder="Filter by Date Range" 
            class="date-filter"></p-calendar>
          
          <div class="filter-actions">
            <p-button label="Apply" icon="pi pi-filter" (onClick)="applyFilters()" 
              styleClass="p-button-outlined"></p-button>
            <p-button label="Clear" icon="pi pi-times" (onClick)="clearFilters()" 
              styleClass="p-button-outlined p-button-secondary"></p-button>
          </div>
        </div>
      </div>

      <div *ngIf="loading" class="loading-container">
        <p-progressSpinner></p-progressSpinner>
        <p>Loading meetings...</p>
      </div>

      <div *ngIf="error" class="error-container">
        <i class="pi pi-exclamation-triangle" style="font-size: 2rem; color: var(--red-500);"></i>
        <p>Failed to load meetings. Please try again.</p>
        <p-button label="Retry" (onClick)="loadMeetings()" 
          styleClass="p-button-outlined"></p-button>
      </div>

      <p-table *ngIf="!loading && !error" [value]="meetings" 
        [paginator]="true" [rows]="rows" [totalRecords]="totalRecords" 
        [first]="first" [rowsPerPageOptions]="[5, 10, 25, 50]" 
        [showCurrentPageReport]="true" currentPageReportTemplate="Showing {first} to {last} of {totalRecords} meetings" 
        [globalFilterFields]="['title', 'location', 'status']" 
        responsiveLayout="scroll" styleClass="p-datatable-striped">
        
        <ng-template pTemplate="header">
          <tr>
            <th pSortableColumn="title">Title <p-sortIcon field="title"></p-sortIcon></th>
            <th pSortableColumn="startTime">Start Time <p-sortIcon field="startTime"></p-sortIcon></th>
            <th pSortableColumn="endTime">End Time <p-sortIcon field="endTime"></p-sortIcon></th>
            <th pSortableColumn="location">Location <p-sortIcon field="location"></p-sortIcon></th>
            <th pSortableColumn="status">Status <p-sortIcon field="status"></p-sortIcon></th>
            <th>Actions</th>
          </tr>
        </ng-template>
        
        <ng-template pTemplate="body" let-meeting>
          <tr>
            <td>{{ meeting.title }}</td>
            <td>{{ formatDate(meeting.startTime) }}</td>
            <td>{{ formatDate(meeting.endTime) }}</td>
            <td>{{ meeting.location }}</td>
            <td>
              <p-tag [value]="meeting.status" [severity]="getStatusClass(meeting.status)"></p-tag>
            </td>
            <td>
              <div class="action-buttons">
                <p-button icon="pi pi-eye" (onClick)="onViewMeeting(meeting)" 
                  styleClass="p-button-rounded p-button-text p-button-info" 
                  tooltip="View Details"></p-button>
                <p-button icon="pi pi-pencil" (onClick)="onEditMeeting(meeting)" 
                  styleClass="p-button-rounded p-button-text p-button-success" 
                  tooltip="Edit Meeting"></p-button>
                <p-button icon="pi pi-trash" (onClick)="onDeleteMeeting(meeting)" 
                  styleClass="p-button-rounded p-button-text p-button-danger" 
                  tooltip="Delete Meeting"></p-button>
              </div>
            </td>
          </tr>
        </ng-template>
        
        <ng-template pTemplate="emptymessage">
          <tr>
            <td colspan="6" class="text-center p-4">
              <i class="pi pi-info-circle" style="font-size: 2rem; color: var(--primary-color);"></i>
              <p>No meetings found.</p>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </div>
</div>

<p-toast></p-toast>
<p-confirmDialog></p-confirmDialog> 