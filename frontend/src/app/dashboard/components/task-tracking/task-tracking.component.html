<div class="task-tracking-container">
  <div class="charts-grid">
    <!-- Status Distribution Chart -->
    <p-card header="Task Status Distribution">
      <div class="chart-container">
        <p-chart type="pie" [data]="statusChartData" [options]="chartOptions"></p-chart>
      </div>
    </p-card>

    <!-- Priority Distribution Chart -->
    <p-card header="Task Priority Distribution">
      <div class="chart-container">
        <p-chart type="pie" [data]="priorityChartData" [options]="chartOptions"></p-chart>
      </div>
    </p-card>
  </div>

  <!-- Recent Tasks Table -->
  <p-card header="Recent Tasks" class="recent-tasks">
    <p-table [value]="tasks" [loading]="loading" [paginator]="true" [rows]="5" 
             [showCurrentPageReport]="true" currentPageReportTemplate="Showing {first} to {last} of {totalRecords} tasks"
             [rowsPerPageOptions]="[5,10,25]">
      <ng-template pTemplate="header">
        <tr>
          <th pSortableColumn="title">Title <p-sortIcon field="title"></p-sortIcon></th>
          <th pSortableColumn="status">Status <p-sortIcon field="status"></p-sortIcon></th>
          <th pSortableColumn="priority">Priority <p-sortIcon field="priority"></p-sortIcon></th>
          <th pSortableColumn="dueDate">Due Date <p-sortIcon field="dueDate"></p-sortIcon></th>
          <th pSortableColumn="assignee">Assignee <p-sortIcon field="assignee"></p-sortIcon></th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-task>
        <tr>
          <td>{{task.title}}</td>
          <td>
            <p-tag [severity]="getStatusSeverity(task.status)" [value]="task.status"></p-tag>
          </td>
          <td>
            <p-tag [severity]="getPrioritySeverity(task.priority)" [value]="task.priority"></p-tag>
          </td>
          <td>{{task.dueDate | date:'mediumDate'}}</td>
          <td>{{task.assignee?.firstName}} {{task.assignee?.lastName}}</td>
        </tr>
      </ng-template>
      <ng-template pTemplate="emptymessage">
        <tr>
          <td colspan="5" class="text-center p-4">No tasks found.</td>
        </tr>
      </ng-template>
    </p-table>
  </p-card>
</div> 